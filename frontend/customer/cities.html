<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Available Cities - Smart Market System</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Same style as yours */
    * { margin: 0; padding: 0; box-sizing: border-box; }

    :root {
      --primary: #1a3a5f; --secondary: #2c5c7a;
      --accent: #3a9bdc; --accent-light: #5bb3e8;
      --light: #f8fafc; --text: #2d3748; --text-light: #718096;
      --success: #38b2ac; --border: #e2e8f0; --error: #e53e3e;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      min-height: 100vh; display: flex; align-items: center; justify-content: center;
      padding: 40px; position: relative; overflow-x: hidden;
    }

    body::before {
      content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
      background: url('https://source.unsplash.com/1600x900/?vellore,city') no-repeat center center/cover;
      opacity: 0.1; z-index: -1;
    }

    .container { background: var(--light); border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15); max-width: 600px; width: 100%;
      padding: 50px 40px; text-align: center; backdrop-filter: blur(10px);
      animation: fadeInUp 0.8s ease; border: 1px solid var(--border);
    }

    .container::before {
      content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 6px;
      background: linear-gradient(to right, var(--accent), var(--success));
    }

    @keyframes fadeInUp { from {opacity: 0; transform: translateY(30px);} to {opacity: 1; transform: translateY(0);} }

    .logo { font-size: 1.8rem; color: var(--primary); margin-bottom: 15px; display: flex;
      align-items: center; justify-content: center; gap: 12px; font-weight: 700;
    }

    .logo i { color: var(--accent); background: rgba(58, 155, 220, 0.1); padding: 10px; border-radius: 12px; }

    h1 { font-size: 2.2rem; color: var(--primary); margin-bottom: 10px; font-weight: 700; letter-spacing: -0.5px; position: relative; display: inline-block; }
    h1::after { content: ''; position: absolute; bottom: -10px; left: 25%; width: 50%; height: 3px; background: linear-gradient(to right, var(--accent), var(--success)); border-radius: 3px; }

    .user-info { margin-bottom: 30px; color: var(--text-light); font-size: 1rem; }
    .user-info i { color: var(--accent); margin-right: 8px; }

    .cities-container { margin-bottom: 25px; padding: 25px; border-radius: 12px; background: white;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05); border: 1px solid var(--border); min-height: 200px;
    }

    .cities-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
    .cities-header h2 { font-size: 1.4rem; color: var(--primary); display: flex; align-items: center; gap: 10px; }
    .cities-header h2 i { color: var(--accent); }

    .refresh-btn { background: var(--accent); color: white; border: none; border-radius: 8px;
      padding: 8px 12px; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 5px; font-size: 0.9rem;
    }

    .refresh-btn:hover { background: var(--accent-light); transform: translateY(-2px); }

    .cities-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; }

    .city-card { background: var(--light); border: 1px solid var(--border); border-radius: 10px;
      padding: 20px 15px; text-align: center; cursor: pointer; transition: all 0.3s ease;
      display: flex; flex-direction: column; align-items: center; gap: 10px;
    }

    .city-card:hover { transform: translateY(-5px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      border-color: var(--accent); background: white; }

    .city-card i { font-size: 2rem; color: var(--accent); background: rgba(58, 155, 220, 0.1);
      width: 60px; height: 60px; display: flex; align-items: center; justify-content: center; border-radius: 50%;
    }

    .city-card h3 { color: var(--text); font-size: 1.1rem; font-weight: 600; }

    .action-buttons { display: flex; justify-content: space-between; margin-top: 20px; }
    .action-btn { padding: 12px 20px; border: none; border-radius: 10px; font-weight: 600;
      cursor: pointer; transition: all 0.3s ease; text-decoration: none; display: inline-flex; align-items: center; gap: 8px;
    }

    .logout-btn { background: rgba(229, 62, 62, 0.1); color: var(--error); border: 1px solid rgba(229, 62, 62, 0.3); }
    .logout-btn:hover { background: var(--error); color: white; }

    .back-btn { background: rgba(113, 128, 150, 0.1); color: var(--text-light); border: 1px solid var(--border); }
    .back-btn:hover { background: var(--text-light); color: white; }

    .footer-note { margin-top: 30px; font-size: 0.9rem; color: var(--text-light); display: flex; align-items: center; justify-content: center; gap: 8px; }
    .footer-note i { color: var(--accent); }
  </style>
</head>

<body>
  <div class="container">
    <div class="logo">
      <i class="fas fa-store"></i>
      <span>Smart Market System</span>
    </div>
    <h1>Available Cities</h1>

    <div class="user-info">
      <i class="fas fa-user"></i>
      <span id="usernameDisplay">Welcome, User</span>
    </div>

    <div class="cities-container">
      <div class="cities-header">
        <h2><i class="fas fa-map-marker-alt"></i> Select Your City</h2>
        <button class="refresh-btn" id="refreshBtn">
          <i class="fas fa-sync-alt"></i> Refresh
        </button>
      </div>

      <div id="citiesContent"></div>
    </div>

    <div class="action-buttons">
      <button class="action-btn back-btn" onclick="window.location.href='login.html'">
        <i class="fas fa-arrow-left"></i> Back to Login
      </button>
      <button class="action-btn logout-btn" onclick="logoutCustomer()">
        <i class="fas fa-sign-out-alt"></i> Logout
      </button>
    </div>

    <div class="footer-note">
      <i class="far fa-copyright"></i>
      <span>2025 Smart Market System. All rights reserved.</span>
    </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const user = localStorage.getItem("customer_username");
      const logged = localStorage.getItem("customer_logged_in");

      if (!user || logged !== "true") {
        console.warn("⚠️ No valid session found. Redirecting...");
        window.location.href = "login.html";
        return;
      }

      document.getElementById("usernameDisplay").textContent = `Welcome, ${user}`;
      displayCities();
    });

    const nearbyCities = ["Vellore", "Katpadi", "Ranipet", "Thiruvannamalai", "Arani", "Gudiyatham", "Pallikonda", "Anaicut"];

    function displayCities() {
      const citiesContent = document.getElementById("citiesContent");
      const grid = document.createElement("div");
      grid.className = "cities-grid";

      nearbyCities.forEach(city => {
        const div = document.createElement("div");
        div.className = "city-card";
        div.innerHTML = `<i class="fas fa-city"></i><h3>${city}</h3>`;
        div.addEventListener("click", () => {
          window.location.href = `retailers.html?city=${encodeURIComponent(city)}`;
        });
        grid.appendChild(div);
      });

      citiesContent.innerHTML = "";
      citiesContent.appendChild(grid);
    }

    document.getElementById("refreshBtn").addEventListener("click", displayCities);

    function logoutCustomer() {
      localStorage.removeItem("customer_username");
      localStorage.removeItem("customer_logged_in");
      window.location.href = "login.html";
    }
  </script>
</body>
</html>
